<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>GAP (JupyterViz) - Chapter 1: How to use this package</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="generator" content="GAPDoc2HTML" />
<link rel="stylesheet" type="text/css" href="manual.css" />
<script src="manual.js" type="text/javascript"></script>
<script type="text/javascript">overwriteStyle();</script>
</head>
<body class="chap1"  onload="jscontent()">


<div class="chlinktop"><span class="chlink1">Goto Chapter: </span><a href="chap0.html">Top</a>  <a href="chap1.html">1</a>  <a href="chap2.html">2</a>  <a href="chap3.html">3</a>  <a href="chapInd.html">Ind</a>  </div>

<div class="chlinkprevnexttop">&nbsp;<a href="chap0.html">[Top of Book]</a>&nbsp;  <a href="chap0.html#contents">[Contents]</a>&nbsp;  &nbsp;<a href="chap0.html">[Previous Chapter]</a>&nbsp;  &nbsp;<a href="chap2.html">[Next Chapter]</a>&nbsp;  </div>

<p id="mathjaxlink" class="pcenter"><a href="chap1_mj.html">[MathJax on]</a></p>
<p><a id="X805201F27AA23554" name="X805201F27AA23554"></a></p>
<div class="ChapSects"><a href="chap1.html#X805201F27AA23554">1 <span class="Heading">How to use this package</span></a>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap1.html#X78E0A9867DABCE86">1.1 <span class="Heading">Purpose</span></a>
</span>
</div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap1.html#X80DC99A778923B3D">1.2 <span class="Heading">Loading the package into a Jupyter notebook</span></a>
</span>
</div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap1.html#X7878B43B78F7E099">1.3 <span class="Heading">Creating a visualization</span></a>
</span>
<div class="ContSSBlock">
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap1.html#X7B0290B3876FCDA1">1.3-1 <span class="Heading">Example: AnyChart</span></a>
</span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap1.html#X7D65933280120650">1.3-2 <span class="Heading">Post-processing visualizations</span></a>
</span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap1.html#X7E2737FC7EDB79B1">1.3-3 <span class="Heading">Example: Cytoscape</span></a>
</span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap1.html#X7A2554B0847DD027">1.3-4 <span class="Heading">Example: D3</span></a>
</span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap1.html#X7836DDAA82B6A536">1.3-5 <span class="Heading">Example: Native HTML Canvas</span></a>
</span>
<span class="ContSS"><br /><span class="nocss">&nbsp;&nbsp;</span><a href="chap1.html#X7C06E0117C8EF31B">1.3-6 <span class="Heading">Example: Plain HTML</span></a>
</span>
</div></div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap1.html#X871A653B85A24E11">1.4 <span class="Heading">Gallery</span></a>
</span>
</div>
</div>

<h3>1 <span class="Heading">How to use this package</span></h3>

<p><a id="X78E0A9867DABCE86" name="X78E0A9867DABCE86"></a></p>

<h4>1.1 <span class="Heading">Purpose</span></h4>

<p>Since 2017, it has been possible to use <strong class="pkg">GAP</strong> in <span class="URL"><a href="http://jupyter.org/">Jupyter</a></span> through the <strong class="pkg">JupyterKernel</strong> package. Output was limited to the ordinary text output <strong class="pkg">GAP</strong> produces; charts and graphs were not possible.</p>

<p>In 2018, Martins and Pfeiffer released <strong class="pkg">francy</strong> (<span class="URL"><a href="https://github.com/mcmartins/francy">repository</a></span>, <span class="URL"><a href="https://arxiv.org/abs/1806.08648">article</a></span>), which lets users create graphs of a few types (vertices and edges, line chart, bar chart, scatter chart). It also allows the user to attach actions to the elements of these charts, which result in callbacks to <strong class="pkg">GAP</strong> that can update the visualization.</p>

<p>This package aims to make a wider variety of visualizations accessible to <strong class="pkg">GAP</strong> users, but does not provide tools for conveniently making such visualizations interactive. Where the <strong class="pkg">francy</strong> package excels at interactive visualizations, this package instead gives a broader scope of visualization tools.</p>

<p>This is achieved by importing several existing JavaScript visualization toolkits and exposing them to <strong class="pkg">GAP</strong> code, as described later in this manual.</p>

<p>The toolkits currently exposed by this package are listed here.</p>


<ul>
<li><p><span class="URL"><a href="https://www.anychart.com/">AnyChart</a></span></p>

</li>
<li><p><span class="URL"><a href="https://canvasjs.com/">CanvasJS</a></span></p>

</li>
<li><p><span class="URL"><a href="https://www.chartjs.org/">ChartJS</a></span></p>

</li>
<li><p><span class="URL"><a href="http://www.cytoscape.org/">Cytoscape</a></span></p>

</li>
<li><p><span class="URL"><a href="https://d3js.org/">D3</a></span></p>

</li>
<li><p><span class="URL"><a href="https://plot.ly/">Plotly</a></span></p>

</li>
<li><p>Native HTML <code class="code">canvas</code> element</p>

</li>
<li><p>Plain HTML</p>

</li>
</ul>
<p><a id="X80DC99A778923B3D" name="X80DC99A778923B3D"></a></p>

<h4>1.2 <span class="Heading">Loading the package into a Jupyter notebook</span></h4>

<p>To import the package into a Jupyter notebook, do so just as with any other <strong class="pkg">GAP</strong> package: Ensure that the kernel of the notebook is a <strong class="pkg">GAP</strong> kernel, then execute the following code in one of the notebook cells.</p>


<div class="example"><pre>
LoadPackage( "jupyterviz" );
</pre></div>

<p><a id="X7878B43B78F7E099" name="X7878B43B78F7E099"></a></p>

<h4>1.3 <span class="Heading">Creating a visualization</span></h4>

<p>Visualizations of any kind supported by this package are created through one function, <code class="func">CreateVisualization</code> (<a href="chap2.html#X7BFFD8B7808F5BDA"><span class="RefLink">2.1-3</span></a>). You can view its complete documentation in for details, but examples are given in this section.</p>

<p>Nearly all visualizations in this package are created by passing data to the <code class="func">CreateVisualization</code> (<a href="chap2.html#X7BFFD8B7808F5BDA"><span class="RefLink">2.1-3</span></a>) function as records describing what to draw. These records are converted into <span class="URL"><a href="http://www.json.org/">JSON</a></span> form by the <strong class="pkg">json</strong> package, and handed to whichever JavaScript toolkit you have chosen to use for creating the visualization.</p>

<p><a id="X7B0290B3876FCDA1" name="X7B0290B3876FCDA1"></a></p>

<h5>1.3-1 <span class="Heading">Example: AnyChart</span></h5>

<p>The AnyChart website contains <span class="URL"><a href="https://docs.anychart.com/Working_with_Data/Data_From_JSON">documentation</a></span> on how to create visualizations from JSON data. Following those conventions, we could give AnyChart the following JSON to produce a pie chart.</p>


<div class="example"><pre>
{
    "chart" : {
        "type" : "pie",
        "data" : [
            { "x" : "Subgroups of order 6", "value" : 1 },
            { "x" : "Subgroups of order 3", "value" : 1 },
            { "x" : "Subgroups of order 2", "value" : 3 },
            { "x" : "Subgroups of order 1", "value" : 1 }
        ]
    }
}
</pre></div>

<p>In <strong class="pkg">GAP</strong>, the same data would be represented with a record, as follows.</p>


<div class="example"><pre>
myChartData := rec(
    chart := rec(
        type := "pie",
        data := [
            rec( x := "Subgroups of order 6", value := 1 ),
            rec( x := "Subgroups of order 3", value := 1 ),
            rec( x := "Subgroups of order 2", value := 3 ),
            rec( x := "Subgroups of order 1", value := 1 )
        ]
    )
);
</pre></div>

<p>We can ask <strong class="pkg">GAP</strong>, running in a Jupyter notebook, to create a visualization from this data by passing that data directly to <code class="func">CreateVisualization</code> (<a href="chap2.html#X7BFFD8B7808F5BDA"><span class="RefLink">2.1-3</span></a>). We wrap it in a record that must specify the tool to use (in this case <code class="code">"anychart"</code>) and optionally some other details not relevant here.</p>


<div class="example"><pre>
CreateVisualization( rec( tool := "anychart", data := myChartData ) );
</pre></div>

<p><img width="500" src="anychart-example.png"/></p>

<p>If you have the data defining a visualization stored in a <code class="file">.json</code> file on disk, you can use the following code rather than rewriting the JSON code into <strong class="pkg">GAP</strong> code yourself.</p>


<div class="example"><pre>
CreateVisualization( rec(
    tool := "anychart",
    data := JsonStringToGap( ReadAll( InputTextFile( "your-file.json" ) ) )
) );
</pre></div>

<p>AnyChart can make a wide variety of charts (area, bar, box, bubble, bullet, column, doughnut, and so on, for over 125 different types and subtypes). Other JavaScript libraries available also have similarly broad capabilities, but we do not include here examples of CanvasJS, ChartJS, or Plotly, because their capabilities and purpose are somewhat similar to that of AnyChart. Though their data formats are different, you can find links to those formats' documentation in the documentation for the function <code class="func">CreateVisualization</code> (<a href="chap2.html#X7BFFD8B7808F5BDA"><span class="RefLink">2.1-3</span></a>). So instead future sections focus on four other examples that are unlike AnyChart.</p>

<p><a id="X7D65933280120650" name="X7D65933280120650"></a></p>

<h5>1.3-2 <span class="Heading">Post-processing visualizations</span></h5>

<p>Note that <code class="func">CreateVisualization</code> (<a href="chap2.html#X7BFFD8B7808F5BDA"><span class="RefLink">2.1-3</span></a>) takes an optional second parameter, a string of JavaScript code to be run once the visualization is complete. For example, if the visualization library did not support a solid black border, but you wanted to add one, you could do so in subsequent code.</p>


<div class="example"><pre>
CreateVisualization(
    sameDataAsAbove, # plus this new second parameter:
    "visualization.style.border = '5px solid black'"
)
</pre></div>

<p>This holds for any visualization tool, not just AnyChart. In the code given in the second parameter, two variables will be defined for your use: <code class="code">element</code> refers to the output cell element in the notebook and <code class="code">visualization</code> refers to the visualization that the toolkit you chose created within that output cell (also an HTML element).</p>

<p><a id="X7E2737FC7EDB79B1" name="X7E2737FC7EDB79B1"></a></p>

<h5>1.3-3 <span class="Heading">Example: Cytoscape</span></h5>

<p>Unlike AnyChart, Cytoscape is for the vertices-and-edges type of graph, not the x-and-y-axes type. A tiny Cytoscape graph (just <span class="Math">A\to B</span>) is represented by the following JSON.</p>


<div class="example"><pre>
{
    elements : [
        { data : { id : "A" } },
        { data : { id : "B" } },
        { data : { id : "edge", source : "A", target : "B" } }
    ],
    layout : { name : "grid", rows : 1 }
}
</pre></div>

<p>Cytoscape graphs can also have style attributes not shown here.</p>

<p>Rather than copy this data directly into <strong class="pkg">GAP</strong>, let's generate graph data in the same format using <strong class="pkg">GAP</strong> code. Here we make a graph of the first 50 positive integers, with <span class="Math">n\to m</span> iff <span class="Math">n\mid m</span> (ordinary integer divisibility).</p>


<div class="example"><pre>
N := 50;
elements := [ ];
roots := [ ];
for i in [2..N] do
    Add( elements, rec( data := rec( id := String( i ) ) ) );
    if IsPrime( i ) then
        Add( roots, i );
    fi;
    for j in [2..i-1] do
        if i mod j = 0 then
            Add( elements, rec( data := rec(
                source := String( j ),
                target := String( i ) ) ) );
        fi;
    od;
od;
</pre></div>

<p>We then need to choose a layout algorithm. The Cytoscape documentation suggests that the "cose" layout works well. Here, we do choose a height (in pixels) for the result, because Cytoscape does not automaticlly resize visualizations to fit their contents. We also set the style for each node to display its ID (which is the integer associated with it).</p>

<p>All the code below comes directly from translating the Cytoscape documentation from JSON form to <strong class="pkg">GAP</strong> record form. See that documentation for more details; it is cited in the documentation for the <code class="func">CreateVisualization</code> (<a href="chap2.html#X7BFFD8B7808F5BDA"><span class="RefLink">2.1-3</span></a>) function.</p>


<div class="example"><pre>
CreateVisualization( rec(
    tool := "cytoscape",
    height := 600,
    data := rec(
        elements := elements, # computed in the code above
        layout := rec( name := "cose" ),
        style := [
            rec( selector := "node", style := rec( content := "data(id)" ) )
        ]
    )
) );
</pre></div>

<p><img width="500" src="cytoscape-example.png"/></p>

<p><a id="X7A2554B0847DD027" name="X7A2554B0847DD027"></a></p>

<h5>1.3-4 <span class="Heading">Example: D3</span></h5>

<p>While D3 is one of the most famous and powerful JavaScript visualization libraries, it does not have a JSON interface. Consequently, we can interact with D3 only through the JavaScript code passed in the second parameter to <code class="func">CreateVisualization</code> (<a href="chap2.html#X7BFFD8B7808F5BDA"><span class="RefLink">2.1-3</span></a>). This makes it much less convenient, but we include it in this package for those who need it.</p>


<div class="example"><pre>
CreateVisualization(
    rec( tool := "d3" ),
    """
    // arbitrary JavaScript code can go here to interact with D3, like so:
    d3.select( visualization ).append( "circle" )
        .attr( "r", 50 ).attr( "cx", 55 ).attr( "cy", 55 )
        .style( "stroke", "red" ).style( "fill", "pink" );
    """
);
</pre></div>

<p><img width="200" src="d3-example.png"/></p>

<p><a id="X7836DDAA82B6A536" name="X7836DDAA82B6A536"></a></p>

<h5>1.3-5 <span class="Heading">Example: Native HTML Canvas</span></h5>

<p>You can create a blank canvas, then use the existing JavaScript canvas API to draw on it.</p>


<div class="example"><pre>
CreateVisualization(
    rec( tool := "canvas", height := 300 ),
    """
    // visualization is the canvas element
    var context = visualization.getContext( '2d' );
    // draw an X
    context.moveTo( 0, 0 );
    context.lineTo( 100, 100 );
    context.moveTo( 100, 0 );
    context.lineTo( 0, 100 );
    context.stroke();
    """
);
</pre></div>

<p><img width="200" src="canvas-example.png"/></p>

<p><a id="X7C06E0117C8EF31B" name="X7C06E0117C8EF31B"></a></p>

<h5>1.3-6 <span class="Heading">Example: Plain HTML</span></h5>

<p>This is the degenerate example of a visualization. It does not create any visualization, but lets you specify arbitrary HTML content instead. It is provided here merely as a convenient way to insert HTML into the notebook.</p>


<div class="example"><pre>
CreateVisualiation( rec(
    tool := "html",
    data := rec(
        html := "&lt;i&gt;Any&lt;/i&gt; HTML can go here.  Tables, buttons, whatever."
    )
) );
</pre></div>

<p><a id="X871A653B85A24E11" name="X871A653B85A24E11"></a></p>

<h4>1.4 <span class="Heading">Gallery</span></h4>

<p>Readers who would like to see a gallery of examples are encouraged to inspect the following files in this package's repository and/or installation directory.</p>


<ul>
<li><p><code class="file">tst/in-noteboook-test.ipynb</code> shows several different visualizations, but can only be loaded in a running Jupyter notebook with this package installed.</p>

</li>
<li><p><code class="file">tst/in-noteboook-test.pdf</code> is a printout, to PDF, of the previous file, with graphics included (though printing from Jupyter notebooks is not perfect, and thus the formatting of this PDF is not that great).</p>

</li>
</ul>
<p>Please be aware, however, that the tools imported by this package have an enormous breadth of capabilities not shown in that file. The reader is encouraged to browse their websites (cited in Section <a href="chap1.html#X78E0A9867DABCE86"><span class="RefLink">1.1</span></a>) for extensive galleries of visualizations.</p>

<p><img width="500" src="canvasjs-example.png"/></p>


<div class="chlinkprevnextbot">&nbsp;<a href="chap0.html">[Top of Book]</a>&nbsp;  <a href="chap0.html#contents">[Contents]</a>&nbsp;  &nbsp;<a href="chap0.html">[Previous Chapter]</a>&nbsp;  &nbsp;<a href="chap2.html">[Next Chapter]</a>&nbsp;  </div>


<div class="chlinkbot"><span class="chlink1">Goto Chapter: </span><a href="chap0.html">Top</a>  <a href="chap1.html">1</a>  <a href="chap2.html">2</a>  <a href="chap3.html">3</a>  <a href="chapInd.html">Ind</a>  </div>

<hr />
<p class="foot">generated by <a href="http://www.math.rwth-aachen.de/~Frank.Luebeck/GAPDoc">GAPDoc2HTML</a></p>
</body>
</html>
